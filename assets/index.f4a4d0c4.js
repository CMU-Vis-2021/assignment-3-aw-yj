const g=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}};g();var o={top:30,right:30,bottom:30,left:50},f=460-o.left-o.right,l=400-o.top-o.bottom,d=d3.select("#my_dataviz").append("svg").attr("width",f+o.left+o.right).attr("height",l+o.top+o.bottom).append("g").attr("transform","translate("+o.left+","+o.top+")");d3.csv("https://raw.githubusercontent.com/CMU-Vis-2021/assignment-3-aw-yj/main/dataset/TeslaAll.csv",function(a){var n=d3.map(a,function(e){return e.Type}).keys();d3.select("#selectButton").selectAll("myOptions").data(n).enter().append("option").text(function(e){return e}).attr("value",function(e){return e});var i=d3.scaleLinear().domain([0,75]).range([0,f]);d.append("g").attr("transform","translate(0,"+l+")").call(d3.axisBottom(i));var u=d3.scaleLinear().range([l,0]).domain([0,.04]);d.append("g").call(d3.axisLeft(u));var t=p(m(2),i.ticks(200)),r=t(a.filter(function(e){return e.Type=="Open"}).map(function(e){return+e.value})),c=d.append("g").append("path").attr("class","mypath").datum(r).attr("fill","#69b3a2").attr("opacity",".8").attr("stroke","#000").attr("stroke-width",1).attr("stroke-linejoin","round").attr("d",d3.line().curve(d3.curveBasis).x(function(e){return i(e[0])}).y(function(e){return u(e[1])}));function h(e){t=p(m(.5),i.ticks(25));var y=t(a.filter(function(s){return s.Type==e}).map(function(s){return+s.value}));c.datum(y).transition().duration(1e3).attr("d",d3.line().curve(d3.curveBasis).x(function(s){return i(s[0])}).y(function(s){return u(s[1])}))}d3.select("#selectButton").on("change",function(e){selectedGroup=this.value,h(selectedGroup)})});function p(a,n){return function(i){return n.map(function(u){return[u,d3.mean(i,function(t){return a(u-t)})]})}}function m(a){return function(n){return Math.abs(n/=a)<=1?.75*(1-n*n)/a:0}}
